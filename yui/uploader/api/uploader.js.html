<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:yui="http://yuilibrary.com/rdf/1.0/yui.rdf#">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<title>API: gallery-uploader   uploader.js  (YUI Library)</title>

	<link rel="stylesheet" type="text/css" href="assets/reset-fonts-grids-min.css?stamp=1272503239.1" />
	<link rel="stylesheet" type="text/css" href="assets/api.css?stamp=1272503239.1" />

    <script type="text/javascript" src="assets/api-js?stamp=1272503239.1"></script>
    <script type="text/javascript" src="assets/ac-js?stamp=1272503239.1"></script>
</head>

<body id="yahoo-com">

<div id="doc3" class="yui-t2">
	<div id="hd">
        <h1><a href="http://developer.yahoo.com/yui/" title="Yahoo! UI Library">Yahoo! UI Library</a></h1>
        <h3>gallery-uploader&nbsp; <span class="subtitle">1.0.0</span></h3>
        <a href="./index.html" title="Yahoo! UI Library">Yahoo! UI Library</a> 
            &gt; <a href="./module_gallery-uploader.html" title="gallery-uploader">gallery-uploader</a>
                
                 &gt; uploader.js (source view) 
        <form onsubmit="return false">
            <div id="propertysearch">
                Search: <input autocomplete="off" id="searchinput" />
                <div id="searchresults">
                    &nbsp;
                </div>
            </div>
        </form>
	</div>

	<div id="bd">
		<div id="yui-main">
			<div class="yui-b">
            <form action="#" name="yui-classopts-form" method="get" id="yui-classopts-form">
                <fieldset>
                    <legend>Filters</legend>
                <span class="classopts"><input type="checkbox" name="show_private" id="show_private" /> <label for="show_private">Show Private</label></span>
                <span class="classopts"><input type="checkbox" name="show_protected" id="show_protected" /> <label for="show_protected">Show Protected</label></span>
                <span class="classopts"><input type="checkbox" name="show_deprecated" id="show_deprecated" /> <label for="show_deprecated">Show Deprecated</label></span>
                </fieldset>
            </form>

                    <div id="srcout">
                        <style>
                            #doc3 .classopts { display:none; }
                        </style>
<div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * Provides a file uploader widget allows a user to select multiple files or drag and drop</span>
<span class="cm"> * files from the desktop into the widget.  Image files are optionally resized.  All files</span>
<span class="cm"> * maybe are optionally archived (zip or tar) and compressed (bzip2, gzip, zip) to save</span>
<span class="cm"> * bandwidth and speed uploads. Cross domain uploads are allowed if the destination </span>
<span class="cm"> * host has a master policy file which allows uploads from the source domain  (crossdomain.xml).</span>
<span class="cm"> * Real upload progress is shown to the user.</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * Uploading to HTTPS is not supported at this time (BrowserPlus Uploader service currently</span>
<span class="cm"> * lacks support for it).</span>
<span class="cm"> *</span>
<span class="cm"> * @module gallery-uploader</span>
<span class="cm"> * @class Uploader</span>
<span class="cm"> */</span>

<span class="c1">// local constants</span>
<span class="kd">var</span> <span class="nx">getCN</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">ClassNameManager</span><span class="p">.</span><span class="nx">getClassName</span><span class="p">,</span>

<span class="nx">UPLOADER</span> <span class="o">=</span> <span class="s2">&quot;uploader&quot;</span><span class="p">,</span>
<span class="nx">CONTENT_BOX</span> <span class="o">=</span> <span class="s2">&quot;contentBox&quot;</span><span class="p">,</span>

<span class="c1">// class names</span>
<span class="nx">LABEL</span>  <span class="o">=</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
<span class="nx">HEADER</span> <span class="o">=</span> <span class="s2">&quot;hd&quot;</span><span class="p">,</span>
<span class="nx">BODY</span>   <span class="o">=</span> <span class="s2">&quot;bd&quot;</span><span class="p">,</span>
<span class="nx">FOOTER</span> <span class="o">=</span> <span class="s2">&quot;ft&quot;</span><span class="p">,</span>
<span class="nx">ENTRY</span>  <span class="o">=</span> <span class="s2">&quot;entry&quot;</span><span class="p">,</span>


<span class="c1">// EVENT NAMES -- keep in sync with event documentation below</span>
<span class="nx">FILE_ADDED</span>	  <span class="o">=</span> <span class="s2">&quot;fileAdded&quot;</span><span class="p">,</span>	  
<span class="nx">FILE_REMOVED</span>  <span class="o">=</span> <span class="s2">&quot;fileRemoved&quot;</span><span class="p">,</span>
<span class="nx">FILES_CHANGED</span> <span class="o">=</span> <span class="s2">&quot;filesChanged&quot;</span><span class="p">,</span>
<span class="nx">RESIZE_START</span>	 <span class="o">=</span> <span class="s2">&quot;resizeStart&quot;</span><span class="p">,</span>
<span class="nx">RESIZE_PROGRESS</span>	 <span class="o">=</span> <span class="s2">&quot;resizeProgress&quot;</span><span class="p">,</span>	
<span class="nx">RESIZE_COMPLETE</span>	 <span class="o">=</span> <span class="s2">&quot;resizeComplete&quot;</span><span class="p">,</span>
<span class="nx">ARCHIVE_START</span>	 <span class="o">=</span> <span class="s2">&quot;archiveStart&quot;</span><span class="p">,</span>
<span class="nx">ARCHIVE_PROGRESS</span> <span class="o">=</span> <span class="s2">&quot;archiveProgress&quot;</span><span class="p">,</span>
<span class="nx">ARCHIVE_COMPLETE</span> <span class="o">=</span> <span class="s2">&quot;archiveComplete&quot;</span><span class="p">,</span>
<span class="nx">UPLOAD_START</span>	 <span class="o">=</span> <span class="s2">&quot;uploadStart&quot;</span><span class="p">,</span>	
<span class="nx">UPLOAD_PROGRESS</span>	 <span class="o">=</span> <span class="s2">&quot;uploadProgress&quot;</span><span class="p">,</span>
<span class="nx">UPLOAD_RESPONSE</span>	 <span class="o">=</span> <span class="s2">&quot;uploadResponse&quot;</span><span class="p">,</span>
<span class="nx">UPLOAD_COMPLETE</span>	 <span class="o">=</span> <span class="s2">&quot;uploadComplete&quot;</span><span class="p">,</span>


<span class="nx">MB</span> <span class="o">=</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">,</span>

<span class="c1">// BrowserPlus Services</span>
<span class="nx">SERVICES</span> <span class="o">=</span> <span class="p">[</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;Uploader&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="nx">minversion</span><span class="o">:</span> <span class="s2">&quot;3.2.12&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;DragAndDrop&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;Directory&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;FileBrowse&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;ImageAlter&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;4&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="nx">service</span><span class="o">:</span> <span class="s2">&quot;Archiver&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span> <span class="p">}</span>
<span class="p">];</span>


<span class="cm">/**</span>
<span class="cm"> * Uploader creates a file upload widget that allows the user to </span>
<span class="cm"> * select or drag+drop multiple files from the desktop into it and</span>
<span class="cm"> * then upload multiple files at a time.</span>
<span class="cm"> *</span>
<span class="cm"> * @param config {Object} Object literal specifying Uploader configuration properties.</span>
<span class="cm"> *</span>
<span class="cm"> * @class Uploader</span>
<span class="cm"> * @constructor</span>
<span class="cm"> * @extends Widget</span>
<span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">Uploader</span><span class="p">(</span> <span class="nx">config</span> <span class="p">){</span>
	<span class="nx">Uploader</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * The identity of the widget.</span>
<span class="cm"> *</span>
<span class="cm"> * @property UPLOADER</span>
<span class="cm"> * @type String</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">NAME</span> <span class="o">=</span> <span class="nx">UPLOADER</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Attribute configuration for the Uploader widget.</span>
<span class="cm"> * </span>
<span class="cm"> * @property Upload.ATTRS</span>
<span class="cm"> * @type Object</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">ATTRS</span> <span class="o">=</span> <span class="p">{</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Maximum size in bytes of a single file.	Default is 2MB.	 Set size to 0 or </span>
<span class="cm">	 * less for no limit.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute maxFileSize</span>
<span class="cm">	 * @type Number</span>
<span class="cm">	 * @default 2097152 (2MB)</span>
<span class="cm">	 */</span>
	<span class="nx">maxFileSize</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="o">*</span><span class="nx">MB</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Maximum width of an uploaded image.	By default, uploaded images are not resized.  Set this</span>
<span class="cm">	 * value to non-zero to restrict the size of an image.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute resizeWidth</span>
<span class="cm">	 * @type Number</span>
<span class="cm">	 * @default 0 (don&#39;t scale image)</span>
<span class="cm">	 */</span>
	<span class="nx">resizeWidth</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Maximum height of an uploaded image. By default, uploaded images are not resized.  Set this</span>
<span class="cm">	 * value to non-zero to restrict the size of an image.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute resizeHeight</span>
<span class="cm">	 * @type Number</span>
<span class="cm">	 * @default 0 (don&#39;t scale image)</span>
<span class="cm">	 */</span>
	<span class="nx">resizeHeight</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * The quality of the scaled image (0-100).	 Lower qualities result in faster operations and </span>
<span class="cm">	 * smaller file sizes, at the cost of image quality.</span>
<span class="cm">	 * @attribute quality</span>
<span class="cm">	 * @type Number</span>
<span class="cm">	 * @default 80</span>
<span class="cm">	 */</span>
	<span class="nx">resizeQuality</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="mi">80</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">);}</span>
	<span class="p">},</span>
	
	
	<span class="cm">/**</span>
<span class="cm">	 * Set the optional archive + compression format.  When set, all files will be archived</span>
<span class="cm">	 * and compressed (depending on the format) into a single file before upload.  Used</span>
<span class="cm">	 * in conjunction with image resizing, upload speed should improve with less bits</span>
<span class="cm">	 * sent over the wire.	Valid values: (&#39;tar&#39;, &#39;tar-bzip2&#39;, &#39;tar-gzip&#39;, &#39;zip&#39;, &#39;zip-uncompressed&#39;).</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute archiveFormat</span>
<span class="cm">	 * @type String</span>
<span class="cm">	 * @default null</span>
<span class="cm">	 */</span>
	<span class="nx">archiveFormat</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">switch</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">case</span> <span class="s1">&#39;zip&#39;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s1">&#39;zip-uncompressed&#39;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s1">&#39;tar&#39;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s1">&#39;tar-gzip&#39;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s1">&#39;tar-bzip2&#39;</span><span class="o">:</span>
					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
				<span class="k">default</span><span class="o">:</span>
					<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * @description An array of mimeTypes for which the selected files will be filtered</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute mimeTypes</span>
<span class="cm">	 * @default []</span>
<span class="cm">	 * @type Array</span>
<span class="cm">	 */</span>
	<span class="nx">mimeTypes</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="p">[],</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * The optional cookie string POSTed to server during upload.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute cookie</span>
<span class="cm">	 * @type String</span>
<span class="cm">	 * @default null (cookie not sent)</span>
<span class="cm">	 */</span>
	<span class="nx">cookie</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Array of files that are going to be uploaded.  Each file is a object that</span>
<span class="cm">	 * contains {name, size, TBD}.</span>
<span class="cm">	 * </span>
<span class="cm">	 * @attribute files</span>
<span class="cm">	 * @readOnly</span>
<span class="cm">	 * @default []</span>
<span class="cm">	 * @type Array</span>
<span class="cm">	 */</span>
	<span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="p">[],</span>
		<span class="nx">readOnly</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isArray</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * The URL of the upload script on the server.	If this value is not set, </span>
<span class="cm">	 * files will not be uploaded.</span>
<span class="cm">	 * </span>
<span class="cm">	 * @attribute uploadUrl</span>
<span class="cm">	 * @default null</span>
<span class="cm">	 * @type String</span>
<span class="cm">	 */</span>
	<span class="nx">uploadUrl</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="kc">null</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * The name of the variable in the POST request containing the file data. &quot;file&quot; by default.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute fieldName</span>
<span class="cm">	 * @default file</span>
<span class="cm">	 * @type String</span>
<span class="cm">	 */</span>
	<span class="nx">fieldName</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isString</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * The object containing variables to be sent in the same request as the file upload.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @attribute vars</span>
<span class="cm">	 * @default null</span>
<span class="cm">	 * @type Object</span>
<span class="cm">	 */</span>
	<span class="nx">vars</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isObject</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * An optional integer value between 3 and 240s that places an upper bound in seconds on </span>
<span class="cm">	 * how long to wait without being able to send or receive data from the server (i.e. while </span>
<span class="cm">	 * server is processing uploaded content). Default is 240s.</span>
<span class="cm">	 * @attribute timeout</span>
<span class="cm">	 * @default 240</span>
<span class="cm">	 * @type Number</span>
<span class="cm">	 */</span>
	<span class="nx">timeout</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="mi">240</span><span class="p">,</span>
		<span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">Lang</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span> <span class="o">&lt;=</span> <span class="mi">240</span><span class="p">);}</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * The localizable strings for the Uploader.  Values in string object include:</span>
<span class="cm">	 * &lt;ul&gt;</span>
<span class="cm">	 * &lt;li&gt;filename&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;close&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;add_files&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;drop files&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;upload&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;total&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size_b&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size_kb&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size_mb&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size_gb&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;size_tb&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;resize_progress&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;archive_progress&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;upload_progress&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;upload_complete&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;first_text&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;bp_download&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;bp_installed&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;bp_initfail&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;bp_incompatible&lt;/li&gt;</span>
<span class="cm">	 * &lt;li&gt;bp_requirefail&lt;/li&gt;</span>
<span class="cm">	 *&lt;/ul&gt;</span>
<span class="cm">	 */</span>
	<span class="nx">strings</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">value</span><span class="o">:</span> <span class="p">{</span>
			<span class="nx">filename</span><span class="o">:</span>		  <span class="s2">&quot;File&quot;</span><span class="p">,</span>
			<span class="nx">size</span><span class="o">:</span>			  <span class="s2">&quot;Size&quot;</span><span class="p">,</span>
			<span class="nx">close</span><span class="o">:</span>			  <span class="s2">&quot;Close&quot;</span><span class="p">,</span>
			<span class="nx">add_files</span><span class="o">:</span>		  <span class="s2">&quot;Add Files...&quot;</span><span class="p">,</span>
			<span class="nx">drop_files</span><span class="o">:</span>		  <span class="s2">&quot;Drop Files&quot;</span><span class="p">,</span>
			<span class="nx">upload</span><span class="o">:</span>			  <span class="s2">&quot;Upload&quot;</span><span class="p">,</span>
			<span class="nx">total</span><span class="o">:</span>			  <span class="s2">&quot;Total:&quot;</span><span class="p">,</span>
			<span class="nx">size_b</span><span class="o">:</span>			  <span class="s2">&quot; B&quot;</span><span class="p">,</span>
			<span class="nx">size_kb</span><span class="o">:</span>		  <span class="s2">&quot; KB&quot;</span><span class="p">,</span>				   
			<span class="nx">size_mb</span><span class="o">:</span>		  <span class="s2">&quot; MB&quot;</span><span class="p">,</span>
			<span class="nx">size_gb</span><span class="o">:</span>		  <span class="s2">&quot; GB&quot;</span><span class="p">,</span>
			<span class="nx">size_tb</span><span class="o">:</span>		  <span class="s2">&quot; TB&quot;</span><span class="p">,</span>
			<span class="nx">resize_progress</span><span class="o">:</span>  <span class="s2">&quot;Resizing Images&quot;</span><span class="p">,</span>
			<span class="nx">archive_progress</span><span class="o">:</span> <span class="s2">&quot;Compressing Files&quot;</span><span class="p">,</span>
			<span class="nx">upload_progress</span><span class="o">:</span>  <span class="s2">&quot;Uploading Files&quot;</span><span class="p">,</span>
			<span class="nx">upload_complete</span><span class="o">:</span>  <span class="s2">&quot;Upload Complete!&quot;</span><span class="p">,</span>
			<span class="nx">first_text</span><span class="o">:</span>		  <span class="s2">&quot;Press Add Files... or Drag and Drop files from your computer to start.&quot;</span><span class="p">,</span>
			<span class="nx">bp_download</span><span class="o">:</span> 
				<span class="s2">&quot;Please install &lt;a target=\&quot;blank\&quot; href=\&quot;http://browserplus.yahoo.com/install/\&quot;&gt;BrowserPlus&lt;/a&gt; to continue.&quot;</span><span class="p">,</span>
			<span class="nx">bp_installed</span><span class="o">:</span>
				<span class="s2">&quot;Downloading services...  This happens just once.&quot;</span><span class="p">,</span>
			<span class="nx">bp_initfail</span><span class="o">:</span>
				<span class="s2">&quot;Error - Could not start or install BrowserPlus.&quot;</span><span class="p">,</span>
			<span class="nx">bp_incompatible</span><span class="o">:</span>
				<span class="s2">&quot;Error - Uploader is not compatible with this operating system or internet browser.&quot;</span><span class="p">,</span>
			<span class="nx">bp_requirefail</span><span class="o">:</span>
				<span class="s2">&quot;Error - Could not fetch required services.&quot;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>


<span class="c1">// EVENT DOCUMENTATION</span>
<span class="cm">/**</span>
<span class="cm"> * @event fileAdded</span>
<span class="cm"> * @description Fires for each file added through the file dialog or drag and drop.  </span>
<span class="cm"> * preventDefault() prevents file from being added to UI.</span>
<span class="cm"> * @param file {object} the file added via user interaction</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event fileRemoved</span>
<span class="cm"> * @description Fires for each file user tries to remove.  preventDefault() keeps file in UI.</span>
<span class="cm"> * @param file {object} the file user is trying to remove</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event filesChanged </span>
<span class="cm"> * @description Fires after files are added or removed from UI.</span>
<span class="cm"> * @param file {object} the file user is trying to remove</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event resizeStart</span>
<span class="cm"> * @description Fired after user clicks on Upload button, whether or not there are actually files (images) to resize.</span>
<span class="cm"> * preventDefault cancels upload.</span>
<span class="cm"> * @param files {array} The array of files to be uploaded.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event resizeProgress</span>
<span class="cm"> * @description Fired after progress was made actually resizing an image.  Progress is synthesized and only sent</span>
<span class="cm"> * for 0 and 100 percent.</span>
<span class="cm"> * @param file {object} The file being resized</span>
<span class="cm"> * @param progress {object} Object with file and total percent resize progress</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event resizeComplete</span>
<span class="cm"> * @description Fired when resize is complete.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event archiveStart</span>
<span class="cm"> * @description Fired after resize completes, whether or not there are actually files to archive (and compress).</span>
<span class="cm"> * preventDefault cancels upload.</span>
<span class="cm"> * @param files {array} The array of files to be uploaded.  Images files are resized at this point.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event archiveProgress</span>
<span class="cm"> * @description Fired as all files are archived and compressed into one.  Progress is real here.</span>
<span class="cm"> * @param file {object} The file being archived</span>
<span class="cm"> * @param progress {object} Object with file and total percent archive progress</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event archiveComplete</span>
<span class="cm"> * @description Fired when resize is complete.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event uploadStart</span>
<span class="cm"> * @description Fired after files are archived, start of actual uploading.</span>
<span class="cm"> * preventDefault cancels upload.</span>
<span class="cm"> * @param files {array} The array of files to be uploaded.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event uploadProgress</span>
<span class="cm"> * @description Fired as files are uploaded.  Note that simultaneous uploads occur, so there&#39;s not guarantee as</span>
<span class="cm"> * to the order in which progress events occur for each file.</span>
<span class="cm"> * @param file {object} The file being uploaded</span>
<span class="cm"> * @param progress {object} Object with fileSize, fileSent, filePercent, totalSize, totalSent, totalPercent.</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event uploadResponse</span>
<span class="cm"> * @description Fired at the end of upload for each file.</span>
<span class="cm"> * @param file {object} The file uploaded</span>
<span class="cm"> * @param response {object} Object with a success boolean and data.  Data either contains information</span>
<span class="cm"> * from the server (such as headers, body, statusCode, statusString) or (error, verboseError).</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * @event uploadComplete</span>
<span class="cm"> * @description Fired after all files are uploaded.  preventDefault to handle the UI in a different way.</span>
<span class="cm"> * By default, a message is shown and all the files from the list are cleared.</span>
<span class="cm"> */</span>



<span class="cm">/**</span>
<span class="cm"> * Markup template used to generate the DOM structure for a file.  A file</span>
<span class="cm"> * consists of a name, size and delete icon.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.ENTRY_TEMPLATE</span>
<span class="cm"> * @type String</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_TEMPLATE</span> <span class="o">=</span>
	<span class="s1">&#39;&lt;div id=&quot;{str_guid}&quot; class=&quot;{entry_class}&quot;&gt;&#39;</span> <span class="o">+</span> 
		<span class="s1">&#39;&lt;div class=&quot;{entry_name}&quot;&gt;{str_name}&lt;/div&gt;&#39;</span> <span class="o">+</span> 
		<span class="s1">&#39;&lt;div class=&quot;{entry_size}&quot;&gt;{str_size}&lt;/div&gt;&#39;</span> <span class="o">+</span> 
		<span class="s1">&#39;&lt;div class=&quot;{entry_action}&quot;&gt;&lt;/div&gt;&#39;</span> <span class="o">+</span> 
	<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Map (object) of classNames used to populate the placeholders in the</span>
<span class="cm"> * Uploader.ENTRY_TEMPLATE markup when rendering a new Uploader entry.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Upload.ENTRY_CSS</span>
<span class="cm"> * @type Object</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_CSS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">entry_class</span>	 <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">ENTRY</span><span class="p">),</span>
	<span class="nx">entry_sel</span>	 <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">ENTRY</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">),</span>
	<span class="nx">entry_name</span>	 <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">ENTRY</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">),</span>
	<span class="nx">entry_size</span>	 <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">ENTRY</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">),</span>
	<span class="nx">entry_action</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">ENTRY</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">)</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Markup template used to generate the DOM structure for the header</span>
<span class="cm"> * section of the Uploader when it is rendered.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.HEADER_TEMPLATE</span>
<span class="cm"> * @type String</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">HEADER_TEMPLATE</span> <span class="o">=</span>
	<span class="s1">&#39;&lt;div class=&quot;{hd_class} {bg_class}&quot;&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div class=&quot;{hd_file_label}&quot;&gt;{str_file}&lt;/div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div class=&quot;{hd_size_label}&quot;&gt;{str_size}&lt;/div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div class=&quot;{hd_action_label}&quot;&gt;&lt;/div&gt;&#39;</span> <span class="o">+</span>
	<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Map (object) of classNames used to populate the placeholders in the</span>
<span class="cm"> * Uploader.HEADER_TEMPLATE markup when rendering the Uploader UI.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.HEADER_CSS</span>
<span class="cm"> * @type Object</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">HEADER_CSS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">hd_class</span>		<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">HEADER</span><span class="p">),</span>
	<span class="nx">bg_class</span>		<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;bg&quot;</span><span class="p">),</span>
	<span class="nx">hd_file_label</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">HEADER</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>	<span class="nx">LABEL</span><span class="p">),</span>
	<span class="nx">hd_size_label</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">HEADER</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">,</span>	<span class="nx">LABEL</span><span class="p">),</span>
	<span class="nx">hd_action_label</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">HEADER</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="nx">LABEL</span><span class="p">)</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Markup template used to generate the DOM structure for the Uploader body.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.BODY_TEMPLATE</span>
<span class="cm"> * @type String</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">BODY_TEMPLATE</span> <span class="o">=</span> 
	<span class="s1">&#39;&lt;div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div style=&quot;visibility:hidden&quot; class=&quot;{bd_class} {hover_class}&quot;&gt;&#39;</span> <span class="o">+</span> 
			<span class="s1">&#39;&lt;div class=&quot;{hover_text}&quot;&gt;{str_drop_files}&lt;/div&gt;&#39;</span> <span class="o">+</span> 
		<span class="s1">&#39;&lt;/div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div id=&quot;{filelist_id}&quot; class=&quot;{bd_class} {filelist_class}&quot;&gt;&lt;/div&gt;&#39;</span><span class="o">+</span> 
		<span class="s1">&#39;&lt;div style=&quot;visibility:visible&quot; class=&quot;{bd_class} {first_class}&quot;&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{first_text}&quot;&gt;&lt;/div&gt;&#39;</span> <span class="o">+</span> 
		<span class="s1">&#39;&lt;/div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div style=&quot;visibility:hidden&quot; class=&quot;{bd_class} {message_class}&quot;&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{message_text}&quot;&gt;&lt;/div&gt;&#39;</span>  <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{message_close}&quot;&gt;&lt;a href=&quot;#&quot;&gt;{str_close}&lt;/a&gt;&lt;/div&gt;&#39;</span>  <span class="o">+</span>
		<span class="s1">&#39;&lt;/div&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;div style=&quot;visibility:hidden&quot; class=&quot;{bd_class} {progress_class}&quot;&gt;&#39;</span> <span class="o">+</span> 
			<span class="s1">&#39;&lt;div class=&quot;{progress_bar} {progress_bg}&quot;&gt;&lt;/div&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{progress_bar} {progress_fg}&quot;&gt;&lt;/div&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{progress_text}&quot;&gt;0%&lt;/div&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;div class=&quot;{progress_close}&quot;&gt;&lt;a href=&quot;#&quot;&gt;{str_close}&lt;/a&gt;&lt;/div&gt;&#39;</span>  <span class="o">+</span>
		<span class="s1">&#39;&lt;/div&gt;&#39;</span> <span class="o">+</span>
	<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Map (object) of classNames used to populate the placeholders in the</span>
<span class="cm"> * Uploader.BODY_TEMPLATE markup when rendering the Uploader UI.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.BODY_CSS</span>
<span class="cm"> * @type Object</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">BODY_CSS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">bd_class</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">BODY</span><span class="p">),</span>
	<span class="nx">hover_class</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;hover&quot;</span><span class="p">),</span>
	<span class="nx">hover_text</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;hover&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">),</span>
	<span class="nx">filelist_class</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;filelist&quot;</span><span class="p">),</span>
	<span class="nx">first_class</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;first&quot;</span><span class="p">),</span>
	<span class="nx">first_text</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">),</span>
	<span class="nx">message_class</span>  <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">),</span>
	<span class="nx">message_text</span>   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">),</span>
	<span class="nx">message_close</span>  <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">),</span>
	<span class="nx">progress_class</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">),</span>
	<span class="nx">progress_bar</span>   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">),</span>	
	<span class="nx">progress_bg</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bg&quot;</span><span class="p">),</span>
	<span class="nx">progress_fg</span>	   <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;fg&quot;</span><span class="p">),</span>
	<span class="nx">progress_text</span>  <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">),</span>
	<span class="nx">progress_close</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">)</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Markup template used to generate the DOM structure for the footer</span>
<span class="cm"> * section of the Uploader when it is rendered.</span>
<span class="cm"> *</span>
<span class="cm"> * @property Uploader.FOOTER_TEMPLATE</span>
<span class="cm"> * @type String</span>
<span class="cm"> * @static</span>
<span class="cm"> */</span>
<span class="nx">Uploader</span><span class="p">.</span><span class="nx">FOOTER_TEMPLATE</span> <span class="o">=</span>
	<span class="s1">&#39;&lt;div class=&quot;{ft_class} {bg_class}&quot;&gt;&#39;</span><span class="o">+</span>
		<span class="s1">&#39;&lt;div class=&quot;{ft_button_class}&quot;&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;button disabled class=&quot;{add_button}&quot; type=&quot;button&quot;&gt;{str_add_files}&lt;/button&gt;&#39;</span><span class="o">+</span>
			<span class="s1">&#39;&lt;button disabled class=&quot;{upload_button}&quot; type=&quot;button&quot;&gt;{str_upload}&lt;/button&gt;&#39;</span><span class="o">+</span>
		<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="o">+</span>
		<span class="s1">&#39;&lt;div class=&quot;{ft_size_class}&quot;&gt;&#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;span class=&quot;{ft_total_label}&quot;&gt;{str_total}&lt;/span&gt; &#39;</span> <span class="o">+</span>
			<span class="s1">&#39;&lt;span class=&quot;{ft_size_label}&quot;&gt;{str_size}&lt;/span&gt;&#39;</span> <span class="o">+</span>
		<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="o">+</span>
	<span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>

<span class="nx">Uploader</span><span class="p">.</span><span class="nx">FOOTER_CSS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">ft_class</span>		<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">),</span>
	<span class="nx">bg_class</span>		<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;bg&quot;</span><span class="p">),</span>

	<span class="nx">ft_files_class</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">,</span> <span class="s2">&quot;files&quot;</span><span class="p">),</span>
	<span class="nx">ft_button_class</span> <span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">),</span>
	<span class="nx">ft_size_class</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">),</span>

	<span class="nx">add_button</span>		<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="s2">&quot;add&quot;</span><span class="p">),</span>
	<span class="nx">upload_button</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="s2">&quot;upload&quot;</span><span class="p">),</span>

	<span class="nx">ft_size_label</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">,</span>  <span class="nx">LABEL</span><span class="p">),</span>
	<span class="nx">ft_total_label</span>	<span class="o">:</span> <span class="nx">getCN</span><span class="p">(</span><span class="nx">UPLOADER</span><span class="p">,</span> <span class="nx">FOOTER</span><span class="p">,</span> <span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="nx">LABEL</span><span class="p">)</span>
<span class="p">};</span>



<span class="nx">Y</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">,</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Widget</span><span class="p">,</span> <span class="p">{</span>
	
	<span class="cm">/* Sync the destruction of these values here with the destructor method below */</span>

	<span class="nx">_contentBox</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// the box this widget is renedered into</span>
	
	<span class="nx">_body</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_foot</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_filelist</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>

	<span class="nx">_hoverpane</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_showingHover</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
	<span class="nx">_showingFirst</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
	
	<span class="nx">_firstpane</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_firsttext</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	
	<span class="nx">_messagepane</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>	  <span class="c1">// Message Pane</span>
	<span class="nx">_messagetext</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>	  <span class="c1">// Message displayed to user</span>
	<span class="nx">_messageclose</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>  <span class="c1">// Close Button</span>

	<span class="nx">_progresspane</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_progressbar</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_progresstext</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	
	<span class="nx">_addbutton</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	<span class="nx">_uploadbutton</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
	
	<span class="nx">_progressStrings</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// map event names to user strings</span>
	
	
	<span class="cm">/** </span>
<span class="cm">	 * Convert number of bytes into human readable string (ala &quot;2 MB&quot;) </span>
<span class="cm">	 * @method getFriendlySize</span>
<span class="cm">	 * @param size the size in bytes</span>
<span class="cm">	 */</span>
	<span class="nx">getFriendlySize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">units</span> <span class="o">=</span> <span class="p">[</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.size_b&quot;</span><span class="p">),</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.size_kb&quot;</span><span class="p">),</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.size_mb&quot;</span><span class="p">),</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.size_gb&quot;</span><span class="p">),</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.size_tb&quot;</span><span class="p">)</span>
		<span class="p">];</span>

		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">size</span> <span class="o">&gt;</span> <span class="mi">1024</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="nx">size</span> <span class="o">/=</span> <span class="mi">1024</span><span class="p">;</span> <span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">units</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">size</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span> <span class="o">+</span> <span class="nx">units</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="s2">&quot;?&quot;</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Calculates the sum total of all file sizes in the given array.</span>
<span class="cm">	 * @method getSize</span>
<span class="cm">	 * @parm files the array of files to calculate the size for</span>
<span class="cm">	 */</span>
	<span class="nx">getSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span><span class="o">=</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">sum</span> <span class="o">+=</span> <span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">size</span><span class="p">;</span>
		<span class="p">}</span>
		
		<span class="k">return</span> <span class="nx">sum</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Clears the list of files queued for upload.</span>
<span class="cm">	 * @method clearFiles</span>
<span class="cm">	 */</span>
	<span class="nx">clearFiles</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

		<span class="c1">// remove file entries from ui</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_CSS</span><span class="p">.</span><span class="nx">entry_class</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

		<span class="c1">// remove files entries array</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">).</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">len</span><span class="p">);</span> 

		<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">FILES_CHANGED</span><span class="p">);</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Disable UI from accepting input (drag+drops, add button pushes, upload button pushes).</span>
<span class="cm">	 * @method disableInput</span>
<span class="cm">	 * @param enabled the boolean state</span>
<span class="cm">	 */</span>
	<span class="nx">disableInput</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;disabledInput&quot;</span><span class="p">,</span> <span class="nx">enabled</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">enableAddButton</span><span class="p">(</span><span class="o">!</span><span class="nx">enabled</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">enableUploadButton</span><span class="p">(</span><span class="o">!</span><span class="nx">enabled</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">},</span>
	

	<span class="cm">/**</span>
<span class="cm">	 * Set the enabled state of the Add Files button.</span>
<span class="cm">	 * @method enableAddButton</span>
<span class="cm">	 * @param enabled the boolean state</span>
<span class="cm">	 */</span>
	<span class="nx">enableAddButton</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_addbutton</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="o">!</span><span class="nx">enabled</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Set the enabled state of the Upload button.</span>
<span class="cm">	 * @method enableUploadButton</span>
<span class="cm">	 * @param enabled the boolean state</span>
<span class="cm">	 */</span>
	<span class="nx">enableUploadButton</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_uploadbutton</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span> <span class="o">!</span><span class="nx">enabled</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;uploadUrl&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Disable the Uploader widget.</span>
<span class="cm">	 * @method disable</span>
<span class="cm">	 */</span>
	<span class="nx">disable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">Uploader</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">disable</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Enable the Uploader widget.</span>
<span class="cm">	 * @method enable</span>
<span class="cm">	 */</span>
	<span class="nx">enable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">Uploader</span><span class="p">.</span><span class="nx">superclass</span><span class="p">.</span><span class="nx">enable</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Show the message pane.</span>
<span class="cm">	 * @method showMessage</span>
<span class="cm">	 * @param msg the message to display to the user</span>
<span class="cm">	 */</span>
	<span class="nx">showMessage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagetext</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>

		<span class="c1">// hide progress just in case</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresspane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagepane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Hides the message dialog.  Normally, this does not need to be done programmatically,</span>
<span class="cm">	 * as there is a &quot;Close&quot; link on the dialog.</span>
<span class="cm">	 * @method hideMessage</span>
<span class="cm">	 */</span>
	<span class="nx">hideMessage</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagepane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * When the Upload widget first appears, shows the strings.first_text message </span>
<span class="cm">	 * explaining to the user that drag+drop is available too.	Message is automatically</span>
<span class="cm">	 * hidden once the user adds a file.</span>
<span class="cm">	 * @method showFirst</span>
<span class="cm">	 * @param msg the message to display to the user</span>
<span class="cm">	 */</span>
	<span class="nx">showFirst</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_showingFirst</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firsttext</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firstpane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Hides the first message.	 This is done automatically upon the first user action to add a file.</span>
<span class="cm">	 * @method hideFirst</span>
<span class="cm">	 */</span>
	<span class="nx">hideFirst</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_showingFirst</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firstpane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Shows the hover pane (different color with strings.drop_files message) when user</span>
<span class="cm">	 * is adding files via drag and drop.  This is automatically called.</span>
<span class="cm">	 * @method showHover</span>
<span class="cm">	 */</span>
	<span class="nx">showHover</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_showingHover</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hoverpane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">);</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Hides the hover pane.</span>
<span class="cm">	 * @method hideHover</span>
<span class="cm">	 */</span>
	<span class="nx">hideHover</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_showingHover</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hoverpane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Show the progress pane.	This is automatically displayed during the upload process.</span>
<span class="cm">	 * @method showProgress</span>
<span class="cm">	 */</span>
	<span class="nx">showProgress</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresstext</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;&amp;nbsp;&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressbar</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;0%&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresspane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">);</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Hides the progress pane.</span>
<span class="cm">	 * @method hideProgress</span>
<span class="cm">	 */</span>
	<span class="nx">hideProgress</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">disableInput</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresspane</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Set file size in the UI.</span>
<span class="cm">	 * @method setFileSize</span>
<span class="cm">	 * @param files array.	Size is automatically calculated from this array and presented in user friendly way.</span>
<span class="cm">	 */</span>
	<span class="nx">setFileSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_foot</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">Uploader</span><span class="p">.</span><span class="nx">FOOTER_CSS</span><span class="p">.</span><span class="nx">ft_size_label</span><span class="p">).</span><span class="nx">setContent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getFriendlySize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">(</span><span class="nx">files</span><span class="p">)));</span>
	<span class="p">},</span>
	

	<span class="cm">/**</span>
<span class="cm">	 * Return index of file indentified by &#39;id&#39; or return -1.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _getFileIndex</span>
<span class="cm">	 */</span>
	<span class="nx">_getFileIndex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">files</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Search through files array and return index of entry with same handle id.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _getHandleIndex</span>
<span class="cm">	 */</span>
	<span class="nx">_getHandleIndex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">handle</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">files</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">handle</span> <span class="o">===</span> <span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">BrowserPlusHandleID</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Add files to filelist UI.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method _addFilesToList</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @param files {Array} files passed dropped or selected by user</span>
<span class="cm">	 */</span>
	<span class="nx">_addFilesToList</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">dirArgs</span> <span class="o">=</span> <span class="p">{</span><span class="nx">files</span><span class="o">:</span> <span class="nx">files</span><span class="p">},</span>
			<span class="nx">mimeTypes</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;mimeTypes&quot;</span><span class="p">),</span>
			<span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		
		<span class="k">if</span> <span class="p">(</span><span class="nx">mimeTypes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dirArgs</span><span class="p">.</span><span class="nx">mimetypes</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;mimeTypes&quot;</span><span class="p">);</span> <span class="p">}</span>

		<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">Directory</span><span class="p">.</span><span class="nx">recursiveList</span><span class="p">(</span><span class="nx">dirArgs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">file</span><span class="p">,</span> <span class="nx">files</span><span class="p">,</span> <span class="nx">maxFileSize</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>

			<span class="nx">maxFileSize</span> <span class="o">=</span> <span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;maxFileSize&quot;</span><span class="p">);</span>

			<span class="nx">files</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">files</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">file</span> <span class="o">=</span> <span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

				<span class="c1">// don&#39;t add duplicate files</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">_getHandleIndex</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">BrowserPlusHandleID</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
					<span class="c1">// ignore directories, only care about files now</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">mimeType</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;application/x-folder&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>

					<span class="c1">// if there&#39;s no max set OR file size &lt; max, add file to Uploader</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">maxFileSize</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">file</span><span class="p">.</span><span class="nx">size</span> <span class="o">&lt;=</span> <span class="nx">maxFileSize</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">file</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">guid</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/-/g</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">);</span>
						<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">FILE_ADDED</span><span class="p">,</span> <span class="p">{</span> <span class="nx">file</span><span class="o">:</span> <span class="nx">file</span> <span class="p">});</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="c1">// done adding files, fire meta event</span>
			<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">FILES_CHANGED</span><span class="p">);</span>
		<span class="p">});</span>
	<span class="p">},</span>

	
	<span class="cm">/** </span>
<span class="cm">	 * Display just added file in UI </span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _fileAddedListener</span>
<span class="cm">	 */</span>
	<span class="nx">_fileAddedListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// remember file</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">);</span>

		
		<span class="c1">// add file to ui</span>
		<span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_CSS</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">str_guid</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
			<span class="nx">str_name</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
			<span class="nx">str_size</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getFriendlySize</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span>
		<span class="p">});</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_TEMPLATE</span><span class="p">,</span> <span class="nx">css</span><span class="p">));</span>
	<span class="p">},</span>


	<span class="cm">/**</span>
<span class="cm">	 * Actually remove file from UI and files array.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _fileRemovedListener</span>
<span class="cm">	 */</span>
	<span class="nx">_fileRemovedListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFileIndex</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">).</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// changes array in place</span>
			<span class="nx">Y</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span> <span class="c1">// remove from UI</span>
		<span class="p">}</span>
	<span class="p">},</span>


	<span class="cm">/**</span>
<span class="cm">	 * Update buttons enabled status and file size label after files are added/removed from UI.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _filesChangedListener</span>
<span class="cm">	 */</span>
	<span class="nx">_filesChangedListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="c1">// disable upload button when there are no files</span>
		<span class="kd">var</span> <span class="nx">files</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">),</span> <span class="nx">numfiles</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

		<span class="c1">// only set enabled button when there are files in list to upload</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">enableUploadButton</span><span class="p">(</span><span class="nx">numfiles</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">setFileSize</span><span class="p">(</span><span class="nx">files</span><span class="p">);</span>
	<span class="p">},</span>

	
	<span class="cm">/**</span>
<span class="cm">	 * Displays percentage complete for following: resizeProgress, archiveProgress, uploadProgress</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _progressListener</span>
<span class="cm">	 */</span>
	<span class="nx">_progressListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">totalPercent</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">msg</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_progressStrings</span><span class="p">[</span><span class="nx">type</span><span class="p">];</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_progresstext</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="nx">msg</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">p</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressbar</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">p</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Upload is complete.	Show &quot;Upload complete&quot; in progress dialog, which</span>
<span class="cm">	 * user has to dismiss.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _uploadStepComplete</span>
<span class="cm">	 */</span>
	<span class="nx">_uploadStepComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// when upload is complete, show user &quot;Upload Complete&quot; message and</span>
		<span class="c1">// show &quot;Close&quot; button.	 User presses &quot;Close&quot; and hideProgress shows.</span>
		
		<span class="k">this</span><span class="p">.</span><span class="nx">clearFiles</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresstext</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.upload_complete&quot;</span><span class="p">));</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">);</span>
	<span class="p">},</span>


	<span class="cm">/** </span>
<span class="cm">	 * User clicked Add Files... YAHOO.bp.OpenBrowseDialog called.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _openFileDialog</span>
<span class="cm">	 */</span>
	<span class="nx">_openFileDialog</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;disabledInput&quot;</span><span class="p">))</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
		<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_showingFirst</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">hideFirst</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">FileBrowse</span><span class="p">.</span><span class="nx">OpenBrowseDialog</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_addFilesToList</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">files</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">});</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Returns true if file&#39;s mimetype matches a known image mime type (matches</span>
<span class="cm">	 * image/gif, image/jpeg, image/pjpeg, image/png)</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _isImage</span>
<span class="cm">	 */</span>
	<span class="nx">_isImage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">mimeType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">switch</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">mimeType</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
				<span class="k">case</span> <span class="s2">&quot;image/gif&quot;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s2">&quot;image/pjpeg&quot;</span><span class="o">:</span>
				<span class="k">case</span> <span class="s2">&quot;image/png&quot;</span><span class="o">:</span>
					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
				<span class="k">default</span><span class="o">:</span>
					<span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Step 1:	User clicks on Upload button.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _uploadStepButtonClicked</span>
<span class="cm">	 */</span>
	<span class="nx">_uploadStepButtonClicked</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">//Y.log(&quot;STEP 1: uploadButtonClicked&quot;);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">RESIZE_START</span><span class="p">,</span> <span class="p">{</span><span class="nx">files</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">)</span> <span class="p">});</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Step 2: Resize Images, if needed.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _uploadStepResizeImages</span>
<span class="cm">	 */</span>
	<span class="nx">_uploadStepResizeImages</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">files</span><span class="p">,</span> <span class="nx">numfiles</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">filesToUpload</span> <span class="o">=</span> <span class="p">[],</span> 
			<span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
			<span class="nx">resizeDone</span><span class="p">,</span>			<span class="c1">// inner func</span>
			<span class="nx">resizeValidator</span><span class="p">,</span>	<span class="c1">// inner func</span>
			<span class="nx">resizeImage</span><span class="p">,</span>		<span class="c1">// inner func</span>
			<span class="nx">resizeProgress</span><span class="p">,</span>		<span class="c1">// inner func</span>
			<span class="nx">resizeQuality</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;resizeQuality&quot;</span><span class="p">),</span>
			<span class="nx">resizeWidth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;resizeWidth&quot;</span><span class="p">),</span>
			<span class="nx">resizeHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;resizeHeight&quot;</span><span class="p">),</span>
			<span class="nx">numImagesToResize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">numImagesResized</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="c1">//Y.log(&quot;STEP 2: uploadResizeImages&quot;);</span>

		<span class="c1">// show progress pane over file list</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">showProgress</span><span class="p">();</span>

		<span class="c1">// returns true if file is image and should be resized</span>
		<span class="nx">resizeValidator</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">((</span><span class="nx">resizeWidth</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">resizeHeight</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_isImage</span><span class="p">(</span><span class="nx">file</span><span class="p">));</span>
		<span class="p">};</span>

		<span class="c1">// called for each file, image or not</span>
		<span class="nx">resizeDone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">isImage</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">filesToUpload</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>

			<span class="c1">// send RESIZE events if we&#39;ve actually resized an image</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">isImage</span><span class="p">)</span> <span class="p">{</span>
				<span class="c1">// for all images, send PROGRESS</span>
				<span class="nx">numImagesResized</span><span class="o">++</span><span class="p">;</span>
				<span class="nx">resizeProgress</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">filesToUpload</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="nx">numfiles</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">RESIZE_COMPLETE</span><span class="p">);</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">ARCHIVE_START</span><span class="p">,</span> <span class="p">{</span><span class="nx">files</span><span class="o">:</span><span class="nx">filesToUpload</span><span class="p">});</span>
			<span class="p">}</span>
		<span class="p">};</span>

		<span class="c1">// call BrowserPlus to actually resize image</span>
		<span class="nx">resizeImage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">ImageAlter</span><span class="p">.</span><span class="nx">transform</span><span class="p">({</span>
					<span class="nx">file</span> <span class="o">:</span> <span class="nx">file</span><span class="p">,</span>
					<span class="nx">quality</span> <span class="o">:</span> <span class="nx">resizeQuality</span><span class="p">,</span>
					<span class="nx">actions</span> <span class="o">:</span> <span class="p">[{</span> <span class="nx">scale</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">maxwidth</span><span class="o">:</span> <span class="nx">resizeWidth</span><span class="p">,</span> <span class="nx">maxheight</span><span class="o">:</span> <span class="nx">resizeHeight</span> <span class="p">}</span> <span class="p">}]</span>
				<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span> 
					<span class="nx">cb</span><span class="p">((</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span> <span class="o">?</span> <span class="nx">res</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">file</span> <span class="o">:</span> <span class="nx">file</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">// true - file is &quot;image&quot;</span>
				<span class="p">}</span>
			<span class="p">);</span>
		<span class="p">};</span>

		<span class="c1">// fire a progress event - percent is either &quot;0&quot; or &quot;100&quot; since ImageAlter</span>
		<span class="c1">// doesn&#39;t have actually progress</span>
		<span class="nx">resizeProgress</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">RESIZE_PROGRESS</span><span class="p">,</span> <span class="p">{</span>
				<span class="nx">file</span><span class="o">:</span> <span class="nx">file</span><span class="p">,</span> 
				<span class="nx">progress</span><span class="o">:</span> <span class="p">{</span>
					<span class="nx">filePercent</span><span class="o">:</span>  <span class="nx">percent</span><span class="p">,</span> 
					<span class="nx">totalPercent</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">numImagesResized</span> <span class="o">/</span> <span class="nx">numImagesToResize</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
				<span class="p">}</span>
			<span class="p">});</span>
		<span class="p">};</span>

		<span class="c1">// count the number of images to be resized, so we can show progress</span>
		<span class="c1">// based on the number of images processed</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numfiles</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">resizeValidator</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span> <span class="nx">numImagesToResize</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
		<span class="p">}</span>

		<span class="c1">// for each file, either resize it or we&#39;re done with it</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numfiles</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">resizeValidator</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span>
				<span class="nx">resizeProgress</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
				<span class="nx">resizeImage</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">resizeDone</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="nx">resizeDone</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">false</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span>


	<span class="cm">/**</span>
<span class="cm">	 * Step 3: Archive (and compress) files, if needed.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _uploadStepArchiveFiles</span>
<span class="cm">	 */</span>
	<span class="nx">_uploadStepArchiveFiles</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">files</span><span class="p">,</span> <span class="nx">archiveFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;archiveFormat&quot;</span><span class="p">);</span>

		<span class="c1">//Y.log(&quot;STEP 3: uploadArchiveFiles&quot;);</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">archiveFormat</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">Archiver</span><span class="p">.</span><span class="nx">archive</span><span class="p">(</span>
				<span class="p">{</span>
					<span class="nx">files</span><span class="o">:</span>	<span class="nx">files</span><span class="p">,</span>
					<span class="nx">format</span><span class="o">:</span> <span class="nx">archiveFormat</span><span class="p">,</span>
					<span class="nx">progressCallback</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span> 
						<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">ARCHIVE_PROGRESS</span><span class="p">,</span> <span class="p">{</span> 
							<span class="nx">progress</span><span class="o">:</span> <span class="p">{</span><span class="nx">filePercent</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">percent</span><span class="p">,</span> <span class="nx">totalPercent</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">percent</span> <span class="p">}</span>
						<span class="p">});</span>
					<span class="p">}</span>
				<span class="p">},</span>
				<span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span> <span class="o">?</span> <span class="nx">res</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">archiveFile</span> <span class="o">:</span> <span class="nx">files</span> <span class="p">);</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">ARCHIVE_COMPLETE</span><span class="p">);</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">UPLOAD_START</span><span class="p">,</span> <span class="p">{</span><span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="nx">f</span><span class="p">]});</span>
				<span class="p">}</span>
			<span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">ARCHIVE_COMPLETE</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">UPLOAD_START</span><span class="p">,</span> <span class="p">{</span><span class="nx">files</span><span class="o">:</span> <span class="nx">files</span><span class="p">});</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Step 4: Files are process (images resized, files compressed).  Start the upload.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _uploadStepStart</span>
<span class="cm">	 */</span>
	<span class="nx">_uploadStepStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">files</span><span class="p">,</span> <span class="nx">numfiles</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> 
			<span class="nx">filesUploaded</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">totalBytesToUpload</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">byteCounter</span> <span class="o">=</span> <span class="p">{},</span>
			<span class="nx">uploadFunc</span><span class="p">,</span> 
			<span class="nx">that</span><span class="o">=</span><span class="k">this</span><span class="p">,</span>
			<span class="nx">uploadUrl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;uploadUrl&quot;</span><span class="p">),</span> 
			<span class="nx">fieldName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;fieldName&quot;</span><span class="p">),</span> 
			<span class="nx">timeout</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">),</span>
			<span class="nx">cookie</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;cookie&quot;</span><span class="p">),</span>
			<span class="nx">vars</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;vars&quot;</span><span class="p">),</span>
			<span class="nx">progressCallback</span><span class="p">;</span>
			
		<span class="c1">//Y.log(&quot;STEP 4: uploadStart&quot;);</span>

		<span class="c1">// calculate number of bytes to upload and create object to keep track of</span>
		<span class="c1">// number of bytes uploaded for each file</span>
		<span class="nx">totalBytesToUpload</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">(</span><span class="nx">files</span><span class="p">);</span>

		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numfiles</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">byteCounter</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="o">+</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">BrowserPlusHandleID</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">// Sending 1 file at a time to get simulateneous uploads, so all &quot;total&quot; vals should be ignored</span>
		<span class="c1">// v is {file, filePercent, fileSent, fileSize, totalPercent, totalSent, totalSize}</span>
		<span class="nx">progressCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">// returning function here so we have &quot;file&quot; in closure</span>
			<span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">bytesSent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

				<span class="nx">byteCounter</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="o">+</span><span class="nx">file</span><span class="p">.</span><span class="nx">BrowserPlusHandleID</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fileSent</span><span class="p">;</span>
			
				<span class="c1">// count total bytes sent so far by summing number of bytes sent per file</span>
				<span class="k">for</span> <span class="p">(</span><span class="nx">id</span> <span class="k">in</span> <span class="nx">byteCounter</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">byteCounter</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span> <span class="nx">bytesSent</span> <span class="o">+=</span> <span class="nx">byteCounter</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span> <span class="p">}</span>
				<span class="p">}</span>

				<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">UPLOAD_PROGRESS</span><span class="p">,</span> <span class="p">{</span>
					<span class="nx">file</span><span class="o">:</span> <span class="nx">file</span><span class="p">,</span>
					<span class="nx">progress</span><span class="o">:</span> <span class="p">{</span>
						<span class="nx">fileSent</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fileSent</span><span class="p">,</span>
						<span class="nx">fileSize</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fileSize</span><span class="p">,</span>
						<span class="nx">filePercent</span><span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">filePercent</span><span class="p">,</span>
						<span class="nx">totalSent</span><span class="o">:</span> <span class="nx">bytesSent</span><span class="p">,</span>
						<span class="nx">totalSize</span><span class="o">:</span> <span class="nx">totalBytesToUpload</span><span class="p">,</span>
						<span class="nx">totalPercent</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">bytesSent</span> <span class="o">/</span> <span class="nx">totalBytesToUpload</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
					<span class="p">}</span>
				<span class="p">});</span>
			<span class="p">};</span>
		<span class="p">};</span>
		
		
		<span class="nx">uploadFunc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">fp</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{};</span>
			
			<span class="c1">// the file POST field name is custom</span>
			<span class="nx">fp</span><span class="p">[</span><span class="nx">fieldName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">file</span><span class="p">;</span>

			<span class="nx">params</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">uploadUrl</span><span class="p">;</span>
			<span class="nx">params</span><span class="p">.</span><span class="nx">files</span> <span class="o">=</span> <span class="nx">fp</span><span class="p">;</span>
			<span class="nx">params</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nx">timeout</span><span class="p">;</span>
			<span class="nx">params</span><span class="p">.</span><span class="nx">progressCallback</span> <span class="o">=</span> <span class="nx">progressCallback</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">vars</span><span class="p">)</span>	<span class="p">{</span> <span class="nx">params</span><span class="p">.</span><span class="nx">postvars</span> <span class="o">=</span> <span class="nx">vars</span><span class="p">;</span> <span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">cookie</span><span class="p">)</span> <span class="p">{</span> <span class="nx">params</span><span class="p">.</span><span class="nx">cookies</span> <span class="o">=</span> <span class="nx">cookie</span><span class="p">;</span> <span class="p">}</span>

			<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">upload</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">data</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
						<span class="nx">statusCode</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">,</span> 
						<span class="nx">statusString</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">statusString</span><span class="p">,</span> 
						<span class="nx">headers</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">headers</span><span class="p">,</span>
						<span class="nx">body</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">body</span>
					<span class="p">};</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
						<span class="nx">error</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> 
						<span class="nx">verboseError</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">verboseError</span>
					<span class="p">};</span>
				<span class="p">}</span>

				<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">UPLOAD_RESPONSE</span><span class="p">,</span> <span class="p">{</span><span class="nx">response</span><span class="o">:</span> <span class="p">{</span><span class="nx">success</span><span class="o">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">success</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">}</span> <span class="p">});</span>

				<span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">filesUploaded</span> <span class="o">==</span> <span class="nx">numfiles</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">UPLOAD_COMPLETE</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">});</span> 
		<span class="p">};</span>

		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numfiles</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">uploadFunc</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
		<span class="p">}</span>
	<span class="p">},</span>
	
	
	<span class="cm">/**</span>
<span class="cm">	 * Return the nearest ancestor (including the given node) with the specified className.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _getNodeOrAncestorWithClass</span>
<span class="cm">	 */</span>
	<span class="nx">_getNodeOrAncestorWithClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">cn</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">cn</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">node</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">node</span><span class="p">.</span><span class="nx">ancestor</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">cn</span><span class="p">);});</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="cm">/** </span>
<span class="cm">	 * User clicked in uploader body - see if click is on delete button.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method _fileClickEvent</span>
<span class="cm">	 */</span>
	<span class="nx">_fileClickEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;disabledInput&quot;</span><span class="p">))</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>

		<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">cn</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">),</span> <span class="nx">index</span><span class="p">;</span>

		<span class="c1">// clicked on delete action</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">cn</span> <span class="o">===</span> <span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_CSS</span><span class="p">.</span><span class="nx">entry_action</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">// find nearest file entry</span>
			<span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getNodeOrAncestorWithClass</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">Uploader</span><span class="p">.</span><span class="nx">ENTRY_CSS</span><span class="p">.</span><span class="nx">entry_class</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

				<span class="c1">// user clicked on REMOVE action</span>
				<span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFileIndex</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">));</span>
					
				<span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">FILE_REMOVED</span><span class="p">,</span> <span class="p">{</span><span class="nx">file</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;files&quot;</span><span class="p">)[</span><span class="nx">index</span><span class="p">]});</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="nx">FILES_CHANGED</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Initializer lifecycle implementation for the Uploader class. Publishes events,</span>
<span class="cm">	 * initializes internal properties and subscribes for events.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method initializer</span>
<span class="cm">	 */</span>
	<span class="nx">initializer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cfg</span><span class="p">){</span>

		<span class="c1">// Config Options for publish:</span>
		<span class="c1">//	  http://developer.yahoo.com/yui/3/api/EventTarget.html</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">FILE_ADDED</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fileAddedListener</span><span class="p">});</span>	  <span class="c1">// file(s) added thru D+D or File Dialog</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">FILE_REMOVED</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fileRemovedListener</span><span class="p">});</span>	  <span class="c1">// file removed</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">FILES_CHANGED</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filesChangedListener</span><span class="p">});</span> <span class="c1">// file(s) added or removed</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">RESIZE_START</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uploadStepResizeImages</span><span class="p">});</span> 
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">RESIZE_PROGRESS</span><span class="p">,</span>  <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_progressListener</span><span class="p">});</span> 
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">RESIZE_COMPLETE</span><span class="p">,</span>  <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
		
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">ARCHIVE_START</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uploadStepArchiveFiles</span><span class="p">,</span> <span class="nx">preventedFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideProgress</span><span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">ARCHIVE_PROGRESS</span><span class="p">,</span> <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_progressListener</span><span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">ARCHIVE_COMPLETE</span><span class="p">,</span> <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">UPLOAD_START</span><span class="p">,</span>	   <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uploadStepStart</span><span class="p">,</span> <span class="nx">preventedFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideProgress</span><span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">UPLOAD_PROGRESS</span><span class="p">,</span>  <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_progressListener</span><span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">UPLOAD_RESPONSE</span><span class="p">,</span>  <span class="p">{</span><span class="nx">preventable</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">UPLOAD_COMPLETE</span><span class="p">,</span>  <span class="p">{</span><span class="nx">defaultFn</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uploadStepComplete</span><span class="p">});</span>
	<span class="p">},</span>
			  
	<span class="cm">/**</span>
<span class="cm">	 * Destructor lifecycle implementation for the Uploader class.</span>
<span class="cm">	 * Removes and destroys all registered items.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method destructor</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	<span class="nx">destructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_body</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_foot</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hoverpane</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firstpane</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firsttext</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagepane</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagetext</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messageclose</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresspane</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressbar</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresstext</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_addbutton</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_uploadbutton</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressStrings</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
	<span class="p">},</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Creates UI found in Uploader&#39;s &lt;code&gt;contentBox&lt;/code&gt;.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method renderUI</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	<span class="nx">renderUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
		<span class="c1">// this widget&#39;s outer most box</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">CONTENT_BOX</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_initHead</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_initBody</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_initFoot</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Create the DOM structure for the header elements.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method _initHead</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	<span class="nx">_initHead</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">node</span><span class="p">,</span>
			<span class="nx">css</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">HEADER_CSS</span><span class="p">,</span> <span class="p">{</span>
					<span class="nx">str_file</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.filename&#39;</span><span class="p">),</span>
					<span class="nx">str_size</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.size&#39;</span><span class="p">)</span>
				<span class="p">});</span>

		<span class="nx">node</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">HEADER_TEMPLATE</span><span class="p">,</span> <span class="nx">css</span><span class="p">));</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;firstChild&#39;</span><span class="p">));</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Create the DOM structure for the console body&amp;#8212;where messages are</span>
<span class="cm">	 * rendered.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method _initBody</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	<span class="nx">_initBody</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">guid</span><span class="p">(),</span>
			<span class="nx">css</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">BODY_CSS</span><span class="p">,</span> <span class="p">{</span> 
				<span class="nx">filelist_id</span>	   <span class="o">:</span> <span class="nx">id</span> <span class="p">,</span>
				<span class="nx">str_drop_files</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.drop_files&#39;</span><span class="p">),</span>
				<span class="nx">str_close</span>	   <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.close&quot;</span><span class="p">)</span>
			<span class="p">});</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_body</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">BODY_TEMPLATE</span><span class="p">,</span> <span class="nx">css</span><span class="p">));</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span>		<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">filelist_class</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hoverpane</span>		<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">hover_class</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firstpane</span>		<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">first_class</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_firsttext</span>		<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">first_text</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagepane</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">message_class</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messagetext</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">message_text</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messageclose</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">message_close</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresspane</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">progress_class</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressbar</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">progress_fg</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progresstext</span>	<span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">progress_text</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_body</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">progress_close</span><span class="p">);</span>

		<span class="c1">// link event names to names used in progress pane</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressStrings</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;uploader:resizeProgress&quot;</span><span class="o">:</span>	<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.resize_progress&quot;</span><span class="p">),</span>
			<span class="s2">&quot;uploader:archiveProgress&quot;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.archive_progress&quot;</span><span class="p">),</span>
			<span class="s2">&quot;uploader:uploadProgress&quot;</span><span class="o">:</span>	<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.upload_progress&quot;</span><span class="p">)</span>
		<span class="p">};</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Create the DOM structure for the footer elements.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method _initFoot</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	<span class="nx">_initFoot</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">FOOTER_CSS</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">str_add_files</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.add_files&#39;</span><span class="p">),</span>
			<span class="nx">str_upload</span>	  <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.upload&#39;</span><span class="p">),</span>
			<span class="nx">str_total</span>	  <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.total&#39;</span><span class="p">),</span>
			<span class="nx">str_size</span>	  <span class="o">:</span> <span class="s1">&#39;0&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;strings.size_b&#39;</span><span class="p">)</span>
		<span class="p">});</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_foot</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Y</span><span class="p">.</span><span class="nx">substitute</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">FOOTER_TEMPLATE</span><span class="p">,</span> <span class="nx">css</span><span class="p">));</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_contentBox</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_foot</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_addbutton</span>	   <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_foot</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">add_button</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_uploadbutton</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_foot</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">css</span><span class="p">.</span><span class="nx">upload_button</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Attach BrowserPlus specific events to UI after BrowserPlus has been initialized.</span>
<span class="cm">	 *</span>
<span class="cm">	 * @method _binder</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 */</span>
	 <span class="nx">_binder</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">),</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="c1">// User clicks on &quot;Add Files&quot; or &quot;Upload&quot; button</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_addbutton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_openFileDialog</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_uploadbutton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_uploadStepButtonClicked</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_messageclose</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideMessage</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_progressclose</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideProgress</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

		<span class="c1">// Use clicks in filelist are (click on trashcan icon to remove file)</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_filelist</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fileClickEvent</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

		<span class="c1">// show the initial message (&quot;Press Add Files or Drag and Drop&quot;)</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">showFirst</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.first_text&quot;</span><span class="p">));</span>

		<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">DragAndDrop</span><span class="p">.</span><span class="nx">AddDropTarget</span><span class="p">({</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">r</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
			<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">DragAndDrop</span><span class="p">.</span><span class="nx">AttachCallbacks</span><span class="p">({</span><span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span> 
				<span class="nx">hover</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hovering</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;disabledInput&quot;</span><span class="p">))</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>

					<span class="c1">// hide the &quot;first&quot; message</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">_showingFirst</span><span class="p">)</span> <span class="p">{</span> <span class="nx">that</span><span class="p">.</span><span class="nx">hideFirst</span><span class="p">();}</span>

					<span class="c1">// some logic so visibility property doesn&#39;t get set more than once</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">hovering</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">that</span><span class="p">.</span><span class="nx">_showingHover</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">that</span><span class="p">.</span><span class="nx">showHover</span><span class="p">();</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hovering</span> <span class="o">&amp;&amp;</span> <span class="nx">that</span><span class="p">.</span><span class="nx">_showingHover</span><span class="p">)</span> <span class="p">{</span>
						<span class="nx">that</span><span class="p">.</span><span class="nx">hideHover</span><span class="p">();</span>
					<span class="p">}</span>

				<span class="p">},</span> 
				<span class="nx">drop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;disabledInput&quot;</span><span class="p">))</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">hideHover</span><span class="p">();</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">_addFilesToList</span><span class="p">(</span><span class="nx">files</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>	<span class="kd">function</span><span class="p">()</span> <span class="p">{});</span>
		<span class="p">});</span>
	<span class="p">},</span>

	<span class="cm">/**</span>
<span class="cm">	 * Calls BrowserPlus require.</span>
<span class="cm"> 	 * @protected</span>
<span class="cm">	 * @method _requireServices</span>
<span class="cm">	 */</span>
	<span class="nx">_requireServices</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">require</span><span class="p">({</span><span class="nx">services</span><span class="o">:</span> <span class="nx">SERVICES</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">require</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">hideMessage</span><span class="p">();</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_binder</span><span class="p">();</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_messageclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.bp_requirefail&quot;</span><span class="p">));</span>
			<span class="p">}</span>
		<span class="p">});</span>
	<span class="p">},</span>
	

	<span class="cm">/**</span>
<span class="cm">	 * Initialize BrowserPlus.	Once BrowserPlus is ready, _binder takes care of the rest.</span>
<span class="cm">	 * @protected</span>
<span class="cm">	 * @method bindUI</span>
<span class="cm">	 */</span>
	<span class="nx">bindUI</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
		<span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">init</span><span class="p">({},</span><span class="kd">function</span><span class="p">(</span><span class="nx">init</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">sys</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">clientSystemInfo</span><span class="p">();</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">init</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_requireServices</span><span class="p">();</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="nx">that</span><span class="p">.</span><span class="nx">_messageclose</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="nx">sys</span><span class="p">.</span><span class="nx">supportLevel</span> <span class="o">===</span> <span class="s2">&quot;supported&quot;</span> <span class="o">&amp;&amp;</span> 
					<span class="p">(</span><span class="nx">init</span><span class="p">.</span><span class="nx">error</span> <span class="o">===</span> <span class="s2">&quot;bp.notInstalled&quot;</span> <span class="o">||</span> <span class="nx">init</span><span class="p">.</span><span class="nx">error</span> <span class="o">===</span> <span class="s2">&quot;bpPlugin.platformBlacklisted&quot;</span><span class="p">))</span> 
				<span class="p">{</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.bp_download&quot;</span><span class="p">));</span>
					<span class="nx">YAHOO</span><span class="p">.</span><span class="nx">bp</span><span class="p">.</span><span class="nx">initWhenAvailable</span><span class="p">({},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">that</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.bp_installed&quot;</span><span class="p">));</span>
							<span class="nx">that</span><span class="p">.</span><span class="nx">_requireServices</span><span class="p">();</span>
						<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
							<span class="nx">that</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.bp_initfail&quot;</span><span class="p">));</span>						
						<span class="p">}</span>
					<span class="p">});</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">that</span><span class="p">.</span><span class="nx">showMessage</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;strings.bp_incompatible&quot;</span><span class="p">));</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">});</span>
	<span class="p">}</span>
<span class="p">});</span>

<span class="nx">Y</span><span class="p">.</span><span class="nx">Base</span><span class="p">.</span><span class="nx">build</span><span class="p">(</span><span class="nx">Uploader</span><span class="p">.</span><span class="nx">NAME</span><span class="p">,</span> <span class="nx">Uploader</span><span class="p">,</span> <span class="p">{</span><span class="nx">dynamic</span><span class="o">:</span><span class="kc">false</span><span class="p">});</span>
<span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;BP.Uploader&quot;</span><span class="p">);</span>
<span class="nx">Y</span><span class="p">.</span><span class="nx">BP</span><span class="p">.</span><span class="nx">Uploader</span> <span class="o">=</span> <span class="nx">Uploader</span><span class="p">;</span>
</pre></div>
                    </div>
			</div>
		</div>
		<div class="yui-b">
            <div class="nav">

                    <div id="moduleList" class="module">
                        <h4>Modules</h4>
                        <ul class="content">
                                <li class="selected"><a href="module_gallery-uploader.html" title="gallery-uploader">gallery-uploader</a></li>
                        </ul>
                    </div>

                    <div id="classList" class="module">
                        <h4>Classes</h4>
                        <ul class="content">
                                <li class=""><a href="Uploader.html" title="Uploader">Uploader</a></li>
                                <li class=""><a href="Uploader.html" title="Uploader">Uploader</a></li>
                        </ul>
                    </div>

                    <div id="fileList" class="module">
                        <h4>Files</h4>
                        <ul class="content">        
                                <li class="selected"><a href="uploader.js.html" title="uploader.js">uploader.js</a></li>
                        </ul>
                    </div>





            </div>
		</div>
	</div>
	<div id="ft">
        <hr />
        Copyright &copy; 2010 Yahoo! Inc. All rights reserved.
	</div>
</div>
<script type="text/javascript">
    ALL_YUI_PROPS = [{"url": "Uploader.html#method__addFilesToList", "access": "protected", "host": "Uploader", "type": "method", "name": "_addFilesToList"}, {"url": "Uploader.html#method__addFilesToList", "access": "protected", "host": "Uploader", "type": "method", "name": "_addFilesToList"}, {"url": "Uploader.html#event_archiveComplete", "access": "", "host": "Uploader", "type": "event", "name": "archiveComplete"}, {"url": "Uploader.html#event_archiveComplete", "access": "", "host": "Uploader", "type": "event", "name": "archiveComplete"}, {"url": "Uploader.html#config_archiveFormat", "access": "", "host": "Uploader", "type": "config", "name": "archiveFormat"}, {"url": "Uploader.html#config_archiveFormat", "access": "", "host": "Uploader", "type": "config", "name": "archiveFormat"}, {"url": "Uploader.html#event_archiveFormatChange", "access": "", "host": "Uploader", "type": "event", "name": "archiveFormatChange"}, {"url": "Uploader.html#event_archiveFormatChange", "access": "", "host": "Uploader", "type": "event", "name": "archiveFormatChange"}, {"url": "Uploader.html#event_archiveProgress", "access": "", "host": "Uploader", "type": "event", "name": "archiveProgress"}, {"url": "Uploader.html#event_archiveProgress", "access": "", "host": "Uploader", "type": "event", "name": "archiveProgress"}, {"url": "Uploader.html#event_archiveStart", "access": "", "host": "Uploader", "type": "event", "name": "archiveStart"}, {"url": "Uploader.html#event_archiveStart", "access": "", "host": "Uploader", "type": "event", "name": "archiveStart"}, {"url": "Uploader.html#method__binder", "access": "protected", "host": "Uploader", "type": "method", "name": "_binder"}, {"url": "Uploader.html#method__binder", "access": "protected", "host": "Uploader", "type": "method", "name": "_binder"}, {"url": "Uploader.html#method_bindUI", "access": "protected", "host": "Uploader", "type": "method", "name": "bindUI"}, {"url": "Uploader.html#method_bindUI", "access": "protected", "host": "Uploader", "type": "method", "name": "bindUI"}, {"url": "Uploader.html#method_clearFiles", "access": "", "host": "Uploader", "type": "method", "name": "clearFiles"}, {"url": "Uploader.html#method_clearFiles", "access": "", "host": "Uploader", "type": "method", "name": "clearFiles"}, {"url": "Uploader.html#config_cookie", "access": "", "host": "Uploader", "type": "config", "name": "cookie"}, {"url": "Uploader.html#config_cookie", "access": "", "host": "Uploader", "type": "config", "name": "cookie"}, {"url": "Uploader.html#event_cookieChange", "access": "", "host": "Uploader", "type": "event", "name": "cookieChange"}, {"url": "Uploader.html#event_cookieChange", "access": "", "host": "Uploader", "type": "event", "name": "cookieChange"}, {"url": "Uploader.html#method_destructor", "access": "protected", "host": "Uploader", "type": "method", "name": "destructor"}, {"url": "Uploader.html#method_destructor", "access": "protected", "host": "Uploader", "type": "method", "name": "destructor"}, {"url": "Uploader.html#method_disable", "access": "", "host": "Uploader", "type": "method", "name": "disable"}, {"url": "Uploader.html#method_disable", "access": "", "host": "Uploader", "type": "method", "name": "disable"}, {"url": "Uploader.html#method_disableInput", "access": "", "host": "Uploader", "type": "method", "name": "disableInput"}, {"url": "Uploader.html#method_disableInput", "access": "", "host": "Uploader", "type": "method", "name": "disableInput"}, {"url": "Uploader.html#method_enable", "access": "", "host": "Uploader", "type": "method", "name": "enable"}, {"url": "Uploader.html#method_enable", "access": "", "host": "Uploader", "type": "method", "name": "enable"}, {"url": "Uploader.html#method_enableAddButton", "access": "", "host": "Uploader", "type": "method", "name": "enableAddButton"}, {"url": "Uploader.html#method_enableAddButton", "access": "", "host": "Uploader", "type": "method", "name": "enableAddButton"}, {"url": "Uploader.html#method_enableUploadButton", "access": "", "host": "Uploader", "type": "method", "name": "enableUploadButton"}, {"url": "Uploader.html#method_enableUploadButton", "access": "", "host": "Uploader", "type": "method", "name": "enableUploadButton"}, {"url": "Uploader.html#config_fieldName", "access": "", "host": "Uploader", "type": "config", "name": "fieldName"}, {"url": "Uploader.html#config_fieldName", "access": "", "host": "Uploader", "type": "config", "name": "fieldName"}, {"url": "Uploader.html#event_fieldNameChange", "access": "", "host": "Uploader", "type": "event", "name": "fieldNameChange"}, {"url": "Uploader.html#event_fieldNameChange", "access": "", "host": "Uploader", "type": "event", "name": "fieldNameChange"}, {"url": "Uploader.html#event_fileAdded", "access": "", "host": "Uploader", "type": "event", "name": "fileAdded"}, {"url": "Uploader.html#event_fileAdded", "access": "", "host": "Uploader", "type": "event", "name": "fileAdded"}, {"url": "Uploader.html#method__fileAddedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileAddedListener"}, {"url": "Uploader.html#method__fileAddedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileAddedListener"}, {"url": "Uploader.html#method__fileClickEvent", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileClickEvent"}, {"url": "Uploader.html#method__fileClickEvent", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileClickEvent"}, {"url": "Uploader.html#event_fileRemoved", "access": "", "host": "Uploader", "type": "event", "name": "fileRemoved"}, {"url": "Uploader.html#event_fileRemoved", "access": "", "host": "Uploader", "type": "event", "name": "fileRemoved"}, {"url": "Uploader.html#method__fileRemovedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileRemovedListener"}, {"url": "Uploader.html#method__fileRemovedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_fileRemovedListener"}, {"url": "Uploader.html#config_files", "access": "", "host": "Uploader", "type": "config", "name": "files"}, {"url": "Uploader.html#config_files", "access": "", "host": "Uploader", "type": "config", "name": "files"}, {"url": "Uploader.html#event_filesChange", "access": "", "host": "Uploader", "type": "event", "name": "filesChange"}, {"url": "Uploader.html#event_filesChange", "access": "", "host": "Uploader", "type": "event", "name": "filesChange"}, {"url": "Uploader.html#event_filesChanged", "access": "", "host": "Uploader", "type": "event", "name": "filesChanged"}, {"url": "Uploader.html#event_filesChanged", "access": "", "host": "Uploader", "type": "event", "name": "filesChanged"}, {"url": "Uploader.html#method__filesChangedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_filesChangedListener"}, {"url": "Uploader.html#method__filesChangedListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_filesChangedListener"}, {"url": "Uploader.html#method__getFileIndex", "access": "protected", "host": "Uploader", "type": "method", "name": "_getFileIndex"}, {"url": "Uploader.html#method__getFileIndex", "access": "protected", "host": "Uploader", "type": "method", "name": "_getFileIndex"}, {"url": "Uploader.html#method_getFriendlySize", "access": "", "host": "Uploader", "type": "method", "name": "getFriendlySize"}, {"url": "Uploader.html#method_getFriendlySize", "access": "", "host": "Uploader", "type": "method", "name": "getFriendlySize"}, {"url": "Uploader.html#method__getHandleIndex", "access": "protected", "host": "Uploader", "type": "method", "name": "_getHandleIndex"}, {"url": "Uploader.html#method__getHandleIndex", "access": "protected", "host": "Uploader", "type": "method", "name": "_getHandleIndex"}, {"url": "Uploader.html#method__getNodeOrAncestorWithClass", "access": "protected", "host": "Uploader", "type": "method", "name": "_getNodeOrAncestorWithClass"}, {"url": "Uploader.html#method__getNodeOrAncestorWithClass", "access": "protected", "host": "Uploader", "type": "method", "name": "_getNodeOrAncestorWithClass"}, {"url": "Uploader.html#method_getSize", "access": "", "host": "Uploader", "type": "method", "name": "getSize"}, {"url": "Uploader.html#method_getSize", "access": "", "host": "Uploader", "type": "method", "name": "getSize"}, {"url": "Uploader.html#method_hideFirst", "access": "", "host": "Uploader", "type": "method", "name": "hideFirst"}, {"url": "Uploader.html#method_hideFirst", "access": "", "host": "Uploader", "type": "method", "name": "hideFirst"}, {"url": "Uploader.html#method_hideHover", "access": "", "host": "Uploader", "type": "method", "name": "hideHover"}, {"url": "Uploader.html#method_hideHover", "access": "", "host": "Uploader", "type": "method", "name": "hideHover"}, {"url": "Uploader.html#method_hideMessage", "access": "", "host": "Uploader", "type": "method", "name": "hideMessage"}, {"url": "Uploader.html#method_hideMessage", "access": "", "host": "Uploader", "type": "method", "name": "hideMessage"}, {"url": "Uploader.html#method_hideProgress", "access": "", "host": "Uploader", "type": "method", "name": "hideProgress"}, {"url": "Uploader.html#method_hideProgress", "access": "", "host": "Uploader", "type": "method", "name": "hideProgress"}, {"url": "Uploader.html#method__initBody", "access": "protected", "host": "Uploader", "type": "method", "name": "_initBody"}, {"url": "Uploader.html#method__initBody", "access": "protected", "host": "Uploader", "type": "method", "name": "_initBody"}, {"url": "Uploader.html#method__initFoot", "access": "protected", "host": "Uploader", "type": "method", "name": "_initFoot"}, {"url": "Uploader.html#method__initFoot", "access": "protected", "host": "Uploader", "type": "method", "name": "_initFoot"}, {"url": "Uploader.html#method__initHead", "access": "protected", "host": "Uploader", "type": "method", "name": "_initHead"}, {"url": "Uploader.html#method__initHead", "access": "protected", "host": "Uploader", "type": "method", "name": "_initHead"}, {"url": "Uploader.html#method_initializer", "access": "protected", "host": "Uploader", "type": "method", "name": "initializer"}, {"url": "Uploader.html#method_initializer", "access": "protected", "host": "Uploader", "type": "method", "name": "initializer"}, {"url": "Uploader.html#method__isImage", "access": "protected", "host": "Uploader", "type": "method", "name": "_isImage"}, {"url": "Uploader.html#method__isImage", "access": "protected", "host": "Uploader", "type": "method", "name": "_isImage"}, {"url": "Uploader.html#config_maxFileSize", "access": "", "host": "Uploader", "type": "config", "name": "maxFileSize"}, {"url": "Uploader.html#config_maxFileSize", "access": "", "host": "Uploader", "type": "config", "name": "maxFileSize"}, {"url": "Uploader.html#event_maxFileSizeChange", "access": "", "host": "Uploader", "type": "event", "name": "maxFileSizeChange"}, {"url": "Uploader.html#event_maxFileSizeChange", "access": "", "host": "Uploader", "type": "event", "name": "maxFileSizeChange"}, {"url": "Uploader.html#config_mimeTypes", "access": "", "host": "Uploader", "type": "config", "name": "mimeTypes"}, {"url": "Uploader.html#config_mimeTypes", "access": "", "host": "Uploader", "type": "config", "name": "mimeTypes"}, {"url": "Uploader.html#event_mimeTypesChange", "access": "", "host": "Uploader", "type": "event", "name": "mimeTypesChange"}, {"url": "Uploader.html#event_mimeTypesChange", "access": "", "host": "Uploader", "type": "event", "name": "mimeTypesChange"}, {"url": "Uploader.html#method__openFileDialog", "access": "protected", "host": "Uploader", "type": "method", "name": "_openFileDialog"}, {"url": "Uploader.html#method__openFileDialog", "access": "protected", "host": "Uploader", "type": "method", "name": "_openFileDialog"}, {"url": "Uploader.html#method__progressListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_progressListener"}, {"url": "Uploader.html#method__progressListener", "access": "protected", "host": "Uploader", "type": "method", "name": "_progressListener"}, {"url": "Uploader.html#config_quality", "access": "", "host": "Uploader", "type": "config", "name": "quality"}, {"url": "Uploader.html#config_quality", "access": "", "host": "Uploader", "type": "config", "name": "quality"}, {"url": "Uploader.html#event_qualityChange", "access": "", "host": "Uploader", "type": "event", "name": "qualityChange"}, {"url": "Uploader.html#event_qualityChange", "access": "", "host": "Uploader", "type": "event", "name": "qualityChange"}, {"url": "Uploader.html#method_renderUI", "access": "protected", "host": "Uploader", "type": "method", "name": "renderUI"}, {"url": "Uploader.html#method_renderUI", "access": "protected", "host": "Uploader", "type": "method", "name": "renderUI"}, {"url": "Uploader.html#method__requireServices", "access": "protected", "host": "Uploader", "type": "method", "name": "_requireServices"}, {"url": "Uploader.html#method__requireServices", "access": "protected", "host": "Uploader", "type": "method", "name": "_requireServices"}, {"url": "Uploader.html#event_resizeComplete", "access": "", "host": "Uploader", "type": "event", "name": "resizeComplete"}, {"url": "Uploader.html#event_resizeComplete", "access": "", "host": "Uploader", "type": "event", "name": "resizeComplete"}, {"url": "Uploader.html#config_resizeHeight", "access": "", "host": "Uploader", "type": "config", "name": "resizeHeight"}, {"url": "Uploader.html#config_resizeHeight", "access": "", "host": "Uploader", "type": "config", "name": "resizeHeight"}, {"url": "Uploader.html#event_resizeHeightChange", "access": "", "host": "Uploader", "type": "event", "name": "resizeHeightChange"}, {"url": "Uploader.html#event_resizeHeightChange", "access": "", "host": "Uploader", "type": "event", "name": "resizeHeightChange"}, {"url": "Uploader.html#event_resizeProgress", "access": "", "host": "Uploader", "type": "event", "name": "resizeProgress"}, {"url": "Uploader.html#event_resizeProgress", "access": "", "host": "Uploader", "type": "event", "name": "resizeProgress"}, {"url": "Uploader.html#event_resizeStart", "access": "", "host": "Uploader", "type": "event", "name": "resizeStart"}, {"url": "Uploader.html#event_resizeStart", "access": "", "host": "Uploader", "type": "event", "name": "resizeStart"}, {"url": "Uploader.html#config_resizeWidth", "access": "", "host": "Uploader", "type": "config", "name": "resizeWidth"}, {"url": "Uploader.html#config_resizeWidth", "access": "", "host": "Uploader", "type": "config", "name": "resizeWidth"}, {"url": "Uploader.html#event_resizeWidthChange", "access": "", "host": "Uploader", "type": "event", "name": "resizeWidthChange"}, {"url": "Uploader.html#event_resizeWidthChange", "access": "", "host": "Uploader", "type": "event", "name": "resizeWidthChange"}, {"url": "Uploader.html#method_setFileSize", "access": "", "host": "Uploader", "type": "method", "name": "setFileSize"}, {"url": "Uploader.html#method_setFileSize", "access": "", "host": "Uploader", "type": "method", "name": "setFileSize"}, {"url": "Uploader.html#method_showFirst", "access": "", "host": "Uploader", "type": "method", "name": "showFirst"}, {"url": "Uploader.html#method_showFirst", "access": "", "host": "Uploader", "type": "method", "name": "showFirst"}, {"url": "Uploader.html#method_showHover", "access": "", "host": "Uploader", "type": "method", "name": "showHover"}, {"url": "Uploader.html#method_showHover", "access": "", "host": "Uploader", "type": "method", "name": "showHover"}, {"url": "Uploader.html#method_showMessage", "access": "", "host": "Uploader", "type": "method", "name": "showMessage"}, {"url": "Uploader.html#method_showMessage", "access": "", "host": "Uploader", "type": "method", "name": "showMessage"}, {"url": "Uploader.html#method_showProgress", "access": "", "host": "Uploader", "type": "method", "name": "showProgress"}, {"url": "Uploader.html#method_showProgress", "access": "", "host": "Uploader", "type": "method", "name": "showProgress"}, {"url": "Uploader.html#property_strings", "access": "", "host": "Uploader", "type": "property", "name": "strings"}, {"url": "Uploader.html#property_strings", "access": "", "host": "Uploader", "type": "property", "name": "strings"}, {"url": "Uploader.html#config_timeout", "access": "", "host": "Uploader", "type": "config", "name": "timeout"}, {"url": "Uploader.html#config_timeout", "access": "", "host": "Uploader", "type": "config", "name": "timeout"}, {"url": "Uploader.html#event_timeoutChange", "access": "", "host": "Uploader", "type": "event", "name": "timeoutChange"}, {"url": "Uploader.html#event_timeoutChange", "access": "", "host": "Uploader", "type": "event", "name": "timeoutChange"}, {"url": "Uploader.html#property_Upload.ATTRS", "access": "", "host": "Uploader", "type": "property", "name": "Upload.ATTRS"}, {"url": "Uploader.html#property_Upload.ATTRS", "access": "", "host": "Uploader", "type": "property", "name": "Upload.ATTRS"}, {"url": "Uploader.html#event_uploadComplete", "access": "", "host": "Uploader", "type": "event", "name": "uploadComplete"}, {"url": "Uploader.html#event_uploadComplete", "access": "", "host": "Uploader", "type": "event", "name": "uploadComplete"}, {"url": "Uploader.html#property_Upload.ENTRY_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Upload.ENTRY_CSS"}, {"url": "Uploader.html#property_Upload.ENTRY_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Upload.ENTRY_CSS"}, {"url": "Uploader.html#property_UPLOADER", "access": "", "host": "Uploader", "type": "property", "name": "UPLOADER"}, {"url": "Uploader.html#property_UPLOADER", "access": "", "host": "Uploader", "type": "property", "name": "UPLOADER"}, {"url": "Uploader.html#property_Uploader.BODY_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.BODY_CSS"}, {"url": "Uploader.html#property_Uploader.BODY_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.BODY_CSS"}, {"url": "Uploader.html#property_Uploader.BODY_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.BODY_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.BODY_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.BODY_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.ENTRY_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.ENTRY_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.ENTRY_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.ENTRY_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.FOOTER_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.FOOTER_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.FOOTER_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.FOOTER_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.HEADER_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.HEADER_CSS"}, {"url": "Uploader.html#property_Uploader.HEADER_CSS", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.HEADER_CSS"}, {"url": "Uploader.html#property_Uploader.HEADER_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.HEADER_TEMPLATE"}, {"url": "Uploader.html#property_Uploader.HEADER_TEMPLATE", "access": "", "host": "Uploader", "type": "property", "name": "Uploader.HEADER_TEMPLATE"}, {"url": "Uploader.html#event_uploadProgress", "access": "", "host": "Uploader", "type": "event", "name": "uploadProgress"}, {"url": "Uploader.html#event_uploadProgress", "access": "", "host": "Uploader", "type": "event", "name": "uploadProgress"}, {"url": "Uploader.html#event_uploadResponse", "access": "", "host": "Uploader", "type": "event", "name": "uploadResponse"}, {"url": "Uploader.html#event_uploadResponse", "access": "", "host": "Uploader", "type": "event", "name": "uploadResponse"}, {"url": "Uploader.html#event_uploadStart", "access": "", "host": "Uploader", "type": "event", "name": "uploadStart"}, {"url": "Uploader.html#event_uploadStart", "access": "", "host": "Uploader", "type": "event", "name": "uploadStart"}, {"url": "Uploader.html#method__uploadStepArchiveFiles", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepArchiveFiles"}, {"url": "Uploader.html#method__uploadStepArchiveFiles", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepArchiveFiles"}, {"url": "Uploader.html#method__uploadStepButtonClicked", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepButtonClicked"}, {"url": "Uploader.html#method__uploadStepButtonClicked", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepButtonClicked"}, {"url": "Uploader.html#method__uploadStepComplete", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepComplete"}, {"url": "Uploader.html#method__uploadStepComplete", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepComplete"}, {"url": "Uploader.html#method__uploadStepResizeImages", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepResizeImages"}, {"url": "Uploader.html#method__uploadStepResizeImages", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepResizeImages"}, {"url": "Uploader.html#method__uploadStepStart", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepStart"}, {"url": "Uploader.html#method__uploadStepStart", "access": "protected", "host": "Uploader", "type": "method", "name": "_uploadStepStart"}, {"url": "Uploader.html#config_uploadUrl", "access": "", "host": "Uploader", "type": "config", "name": "uploadUrl"}, {"url": "Uploader.html#config_uploadUrl", "access": "", "host": "Uploader", "type": "config", "name": "uploadUrl"}, {"url": "Uploader.html#event_uploadUrlChange", "access": "", "host": "Uploader", "type": "event", "name": "uploadUrlChange"}, {"url": "Uploader.html#event_uploadUrlChange", "access": "", "host": "Uploader", "type": "event", "name": "uploadUrlChange"}, {"url": "Uploader.html#config_vars", "access": "", "host": "Uploader", "type": "config", "name": "vars"}, {"url": "Uploader.html#config_vars", "access": "", "host": "Uploader", "type": "config", "name": "vars"}, {"url": "Uploader.html#event_varsChange", "access": "", "host": "Uploader", "type": "event", "name": "varsChange"}, {"url": "Uploader.html#event_varsChange", "access": "", "host": "Uploader", "type": "event", "name": "varsChange"}];
</script>
</body>
</html>
